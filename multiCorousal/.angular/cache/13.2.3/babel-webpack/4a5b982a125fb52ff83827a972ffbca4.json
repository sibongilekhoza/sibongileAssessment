{"ast":null,"code":"import { Directive, ChangeDetectorRef, Inject, Input, HostBinding, HostListener, Injectable, EventEmitter, Component, ContentChildren, Output, ElementRef, Renderer2, NgZone, NgModule } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject } from 'rxjs';\nimport { takeUntil, distinctUntilChanged } from 'rxjs/operators';\nimport * as ɵngcc0 from '@angular/core';\nconst _c0 = [\"mdbScrollspy\", \"\"];\nconst _c1 = [\"*\"];\nlet MdbScrollspyLinkDirective = /*#__PURE__*/(() => {\n  class MdbScrollspyLinkDirective {\n    constructor(cdRef, document) {\n      this.cdRef = cdRef;\n      this.document = document;\n      this._scrollIntoView = true;\n      this.scrollspyLink = true;\n      this.active = false;\n    }\n\n    get scrollIntoView() {\n      return this._scrollIntoView;\n    }\n\n    set scrollIntoView(value) {\n      this._scrollIntoView = value;\n    }\n\n    get section() {\n      return this._section;\n    }\n\n    set section(value) {\n      if (value) {\n        this._section = value;\n      }\n    }\n\n    get id() {\n      return this._id;\n    }\n\n    set id(newId) {\n      if (newId) {\n        this._id = newId;\n      }\n    }\n\n    onClick() {\n      if (this.section && this.scrollIntoView === true) {\n        this.section.scrollIntoView();\n      }\n    }\n\n    detectChanges() {\n      this.cdRef.detectChanges();\n    }\n\n    assignSectionToId() {\n      this.section = this.document.documentElement.querySelector(`#${this.id}`);\n    }\n\n    ngOnInit() {\n      this.assignSectionToId();\n    }\n\n  }\n\n  MdbScrollspyLinkDirective.ɵfac = function MdbScrollspyLinkDirective_Factory(t) {\n    return new (t || MdbScrollspyLinkDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(DOCUMENT));\n  };\n\n  MdbScrollspyLinkDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: MdbScrollspyLinkDirective,\n    selectors: [[\"\", \"mdbScrollspyLink\", \"\"]],\n    hostVars: 4,\n    hostBindings: function MdbScrollspyLinkDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function MdbScrollspyLinkDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"scrollspy-link\", ctx.scrollspyLink)(\"active\", ctx.active);\n      }\n    },\n    inputs: {\n      scrollIntoView: \"scrollIntoView\",\n      id: [\"mdbScrollspyLink\", \"id\"]\n    }\n  });\n  return MdbScrollspyLinkDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet MdbScrollspyService = /*#__PURE__*/(() => {\n  class MdbScrollspyService {\n    constructor() {\n      this.scrollSpys = [];\n      this.activeSubject = new Subject();\n      this.active$ = this.activeSubject;\n    }\n\n    addScrollspy(scrollSpy) {\n      this.scrollSpys.push(scrollSpy);\n    }\n\n    removeScrollspy(scrollSpyId) {\n      const scrollSpyIndex = this.scrollSpys.findIndex(spy => {\n        return spy.id === scrollSpyId;\n      });\n      this.scrollSpys.splice(scrollSpyIndex, 1);\n    }\n\n    updateActiveState(scrollSpyId, activeLinkId) {\n      const scrollSpy = this.scrollSpys.find(spy => {\n        return spy.id === scrollSpyId;\n      });\n\n      if (!scrollSpy) {\n        return;\n      }\n\n      const activeLink = scrollSpy.links.find(link => {\n        return link.id === activeLinkId;\n      });\n      this.setActiveLink(activeLink);\n    }\n\n    removeActiveState(scrollSpyId, activeLinkId) {\n      const scrollSpy = this.scrollSpys.find(spy => {\n        return spy.id === scrollSpyId;\n      });\n\n      if (!scrollSpy) {\n        return;\n      }\n\n      const activeLink = scrollSpy.links.find(link => {\n        return link.id === activeLinkId;\n      });\n\n      if (!activeLink) {\n        return;\n      }\n\n      activeLink.active = false;\n      activeLink.detectChanges();\n    }\n\n    setActiveLink(activeLink) {\n      if (activeLink) {\n        activeLink.active = true;\n        activeLink.detectChanges();\n        this.activeSubject.next(activeLink);\n      }\n    }\n\n    removeActiveLinks(scrollSpyId) {\n      const scrollSpy = this.scrollSpys.find(spy => {\n        return spy.id === scrollSpyId;\n      });\n\n      if (!scrollSpy) {\n        return;\n      }\n\n      scrollSpy.links.forEach(link => {\n        link.active = false;\n        link.detectChanges();\n      });\n    }\n\n  }\n\n  MdbScrollspyService.ɵfac = function MdbScrollspyService_Factory(t) {\n    return new (t || MdbScrollspyService)();\n  };\n\n  MdbScrollspyService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: MdbScrollspyService,\n    factory: MdbScrollspyService.ɵfac\n  });\n  return MdbScrollspyService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})(); // eslint-disable-next-line @angular-eslint/component-class-suffix\n\n\nlet MdbScrollspyDirective = /*#__PURE__*/(() => {\n  class MdbScrollspyDirective {\n    constructor(scrollSpyService) {\n      this.scrollSpyService = scrollSpyService;\n      this._destroy$ = new Subject();\n      this.activeLinkChange = new EventEmitter();\n    }\n\n    get id() {\n      return this._id;\n    }\n\n    set id(newId) {\n      if (newId) {\n        this._id = newId;\n      }\n    }\n\n    ngOnInit() {\n      this.activeSub = this.scrollSpyService.active$.pipe(takeUntil(this._destroy$), distinctUntilChanged()).subscribe(activeLink => {\n        this.activeLinkChange.emit(activeLink);\n      });\n    }\n\n    ngAfterContentInit() {\n      this.scrollSpyService.addScrollspy({\n        id: this.id,\n        links: this.links\n      });\n    }\n\n    ngOnDestroy() {\n      this.scrollSpyService.removeScrollspy(this.id);\n\n      this._destroy$.next();\n\n      this._destroy$.complete();\n    }\n\n  }\n\n  MdbScrollspyDirective.ɵfac = function MdbScrollspyDirective_Factory(t) {\n    return new (t || MdbScrollspyDirective)(ɵngcc0.ɵɵdirectiveInject(MdbScrollspyService));\n  };\n\n  MdbScrollspyDirective.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: MdbScrollspyDirective,\n    selectors: [[\"\", \"mdbScrollspy\", \"\"]],\n    contentQueries: function MdbScrollspyDirective_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, MdbScrollspyLinkDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.links = _t);\n      }\n    },\n    inputs: {\n      id: [\"mdbScrollspy\", \"id\"]\n    },\n    outputs: {\n      activeLinkChange: \"activeLinkChange\"\n    },\n    attrs: _c0,\n    ngContentSelectors: _c1,\n    decls: 1,\n    vars: 0,\n    template: function MdbScrollspyDirective_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return MdbScrollspyDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})(); // eslint-disable-next-line @angular-eslint/directive-class-suffix\n\n\nlet MdbScrollspyElementDirective = /*#__PURE__*/(() => {\n  class MdbScrollspyElementDirective {\n    constructor(_elementRef, renderer, ngZone, scrollSpyService) {\n      this._elementRef = _elementRef;\n      this.renderer = renderer;\n      this.ngZone = ngZone;\n      this.scrollSpyService = scrollSpyService;\n      this.offset = 0;\n    }\n\n    get host() {\n      return this._elementRef.nativeElement;\n    }\n\n    get scrollSpyId() {\n      return this._scrollSpyId;\n    }\n\n    set scrollSpyId(newId) {\n      if (newId) {\n        this._scrollSpyId = newId;\n      }\n    }\n\n    isElementInViewport() {\n      const scrollTop = this.container.scrollTop;\n      const elTop = this.host.offsetTop - this.offset;\n      const elHeight = this.host.offsetHeight;\n      return scrollTop >= elTop && scrollTop < elTop + elHeight;\n    }\n\n    updateActiveState(scrollSpyId, id) {\n      if (this.isElementInViewport()) {\n        this.scrollSpyService.removeActiveLinks(scrollSpyId);\n        this.scrollSpyService.updateActiveState(scrollSpyId, id);\n      }\n    }\n\n    onScroll() {\n      this.updateActiveState(this.scrollSpyId, this.id);\n    }\n\n    listenToScroll() {\n      this.renderer.listen(this.container, 'scroll', () => {\n        this.onScroll();\n      });\n    }\n\n    ngOnInit() {\n      this.id = this.host.id;\n\n      if (!this.container) {\n        this.container = this._getClosestEl(this.host, '.scrollspy-container');\n      }\n\n      this.renderer.setStyle(this.container, 'position', 'relative');\n      this.ngZone.runOutsideAngular(this.listenToScroll.bind(this));\n    }\n\n    ngAfterViewInit() {\n      setTimeout(() => {\n        this.updateActiveState(this.scrollSpyId, this.id);\n      }, 0);\n    }\n\n    _getClosestEl(el, selector) {\n      for (; el && el !== document; el = el.parentNode) {\n        if (el.matches && el.matches(selector)) {\n          return el;\n        }\n      }\n\n      return null;\n    }\n\n  }\n\n  MdbScrollspyElementDirective.ɵfac = function MdbScrollspyElementDirective_Factory(t) {\n    return new (t || MdbScrollspyElementDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(MdbScrollspyService));\n  };\n\n  MdbScrollspyElementDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: MdbScrollspyElementDirective,\n    selectors: [[\"\", \"mdbScrollspyElement\", \"\"]],\n    inputs: {\n      offset: \"offset\",\n      scrollSpyId: [\"mdbScrollspyElement\", \"scrollSpyId\"],\n      container: \"container\"\n    }\n  });\n  return MdbScrollspyElementDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet MdbScrollspyWindowDirective = /*#__PURE__*/(() => {\n  class MdbScrollspyWindowDirective {\n    constructor(document, el, renderer, ngZone, scrollSpyService) {\n      this.document = document;\n      this.el = el;\n      this.renderer = renderer;\n      this.ngZone = ngZone;\n      this.scrollSpyService = scrollSpyService;\n      this.offset = 0;\n    }\n\n    get scrollSpyId() {\n      return this._scrollSpyId;\n    }\n\n    set scrollSpyId(newId) {\n      if (newId) {\n        this._scrollSpyId = newId;\n      }\n    }\n\n    isElementInViewport() {\n      const scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop;\n      const elHeight = this.el.nativeElement.offsetHeight;\n      const elTop = this.el.nativeElement.offsetTop - this.offset;\n      const elBottom = elTop + elHeight;\n      return scrollTop >= elTop && scrollTop <= elBottom;\n    }\n\n    updateActiveState(scrollSpyId, id) {\n      if (this.isElementInViewport()) {\n        this.scrollSpyService.updateActiveState(scrollSpyId, id);\n      } else {\n        this.scrollSpyService.removeActiveState(scrollSpyId, id);\n      }\n    }\n\n    onScroll() {\n      this.updateActiveState(this.scrollSpyId, this.id);\n    }\n\n    listenToScroll() {\n      this.renderer.listen(window, 'scroll', () => {\n        this.onScroll();\n      });\n    }\n\n    ngOnInit() {\n      this.id = this.el.nativeElement.id;\n      this.ngZone.runOutsideAngular(this.listenToScroll.bind(this));\n    }\n\n    ngAfterViewInit() {\n      setTimeout(() => {\n        this.updateActiveState(this.scrollSpyId, this.id);\n      }, 0);\n    }\n\n  }\n\n  MdbScrollspyWindowDirective.ɵfac = function MdbScrollspyWindowDirective_Factory(t) {\n    return new (t || MdbScrollspyWindowDirective)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(MdbScrollspyService));\n  };\n\n  MdbScrollspyWindowDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: MdbScrollspyWindowDirective,\n    selectors: [[\"\", \"mdbScrollspyWindow\", \"\"]],\n    inputs: {\n      offset: \"offset\",\n      scrollSpyId: [\"mdbScrollspyWindow\", \"scrollSpyId\"]\n    }\n  });\n  return MdbScrollspyWindowDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet MdbScrollspyModule = /*#__PURE__*/(() => {\n  class MdbScrollspyModule {}\n\n  MdbScrollspyModule.ɵfac = function MdbScrollspyModule_Factory(t) {\n    return new (t || MdbScrollspyModule)();\n  };\n\n  MdbScrollspyModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: MdbScrollspyModule\n  });\n  MdbScrollspyModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [MdbScrollspyService]\n  });\n  return MdbScrollspyModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MdbScrollspyModule, {\n    declarations: [MdbScrollspyDirective, MdbScrollspyLinkDirective, MdbScrollspyElementDirective, MdbScrollspyWindowDirective],\n    exports: [MdbScrollspyDirective, MdbScrollspyLinkDirective, MdbScrollspyElementDirective, MdbScrollspyWindowDirective]\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { MdbScrollspyDirective, MdbScrollspyElementDirective, MdbScrollspyLinkDirective, MdbScrollspyModule, MdbScrollspyService, MdbScrollspyWindowDirective }; //# sourceMappingURL=mdb-angular-ui-kit-scrollspy.js.map","map":null,"metadata":{},"sourceType":"module"}